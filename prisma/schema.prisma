// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("QUACKSTACK_DATABASE_URL")
}

model codeSnippet {
  id        Int      @id @default(autoincrement())
  content   String
  embedding    Json   
  filePath     String   
  projectName  String 
  language     String?  
  functionName String?
  lineStart    Int?     
  lineEnd      Int?     
  
  lastCommitHash    String?
  lastCommitAuthor  String?
  lastCommitEmail   String?
  lastCommitDate    DateTime?
  lastCommitMessage String?
  totalCommits      Int?       @default(0)
  primaryAuthor     String?
  primaryAuthorEmail String?
  fileOwnerCommits  Int?       @default(0)
  
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([projectName])
  @@index([lastCommitDate])
  @@index([primaryAuthor])
}

model gitAuthor {
  id              Int      @id @default(autoincrement())
  projectName     String
  author          String
  email           String
  totalCommits    Int      @default(0)
  linesAdded      Int      @default(0)
  linesRemoved    Int      @default(0)
  recentActivity  DateTime?
  filesOwned      String[] 
  
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@unique([projectName, email])
  @@index([projectName])
  @@index([recentActivity])
}
